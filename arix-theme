#!/bin/bash
# Arix Theme Auto Installer for Pterodactyl

# Variables
PTERO_DIR="/var/www/pterodactyl"
ARIX_URL="https://github.com/TS-25/SRJ-THEME/releases/download/V1.0.0/arix.zip"
ARIX_ZIP="arix.zip"

echo "=== Arix Theme Installer for Pterodactyl ==="

# Go to Pterodactyl directory
# Ubuntu/Debian
curl -sL https://deb.nodesource.com/setup_22.x | sudo -E bash - 
sudo apt install -y nodejs
npm i -g yarn # Install Yarn
cd /var/www/pterodactyl
yarn # Installs panel build dependencies
cd /var/www/pterodactyl
export NODE_OPTIONS=--openssl-legacy-provider # for NodeJS v17+
yarn build:production # Build panel
cd $PTERO_DIR || { echo "‚ùå Pterodactyl directory not found!"; exit 1; }

# Backup existing panel
echo "üîÑ Backing up current panel..."
cp -r $PTERO_DIR ${PTERO_DIR}-backup-$(date +%F-%H%M)

# Download theme
echo "‚¨áÔ∏è Downloading Arix theme..."
wget -O $ARIX_ZIP $ARIX_URL

# Unzip theme
echo "üìÇ Extracting Arix theme..."
unzip -o $ARIX_ZIP

# Remove ZIP after extraction
rm -f $ARIX_ZIP




echo "‚úÖ Arix theme installed successfully!"
